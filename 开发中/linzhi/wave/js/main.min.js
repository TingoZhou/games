var c=!0,e=!1,h=document.getElementById("canvas"),k=h.getContext("2d");function m(T,S){for(var Q=k.createImageData(T.width*S,T.height*S),P=0;P<T.height;
P++){for(var G=0;G<T.width;G++){for(var o=[T.data[4*(P*T.width+G)+0],T.data[4*(P*T.width+G)+1],T.data[4*(P*T.width+G)+2],T.data[4*(P*T.width+G)+3]],W=0;
W<S;W++){for(var U=P*S+W,R=0;R<S;R++){for(var j=G*S+R,V=0;4>V;V++){Q.data[4*(U*Q.width+j)+V]=o[V];}}}}}return Q;}function r(A,o,P,G,y,Q,E){var j=Math.sqrt(Math.pow(G-Q,2)+Math.pow(y-E,2));
if(0===j){return A=Math.sqrt(Math.pow(A-G,2)+Math.pow(o-y,2)),A<P;}j=((A-G)*(Q-G)+(o-y)*(E-y))/Math.pow(j,2);A=0>j?Math.sqrt(Math.pow(A-G,2)+Math.pow(o-y,2)):1<j?Math.sqrt(Math.pow(A-Q,2)+Math.pow(o-E,2)):Math.sqrt(Math.pow(A-(G+j*(Q-G)),2)+Math.pow(o-(y+j*(E-y)),2));
return A<P;}var u=[[0.138671875,0.8984375,0.05859375,0,0.939453125,0,0.859375,0.8984375,0.498046875,1,"#E34F26"],[0.5,0.921875,0.791015625,0.841796875,0.859375,0.072265626,0.5,0.072265626,"#EF652A"],[0.5,0.40625,0.353515625,0.40625,0.34375,0.29296875,0.5,0.29296875,0.5,0.18359375,0.498046875,0.18359375,0.22265625,0.18359375,0.224609375,0.212890625,0.251953125,0.517578125,0.5,0.517578125,0.5,0.693359375,0.498046875,0.693359375,0.375,0.66015625,0.3671875,0.572265625,0.30859375,0.572265625,0.2578125,0.572265625,0.271484375,0.74609375,0.498046875,0.80859375,0.5,0.80859375,"#EBEBEB"],[0.498046875,0.40625,0.498046875,0.517578125,0.634765625,0.517578125,0.62109375,0.66015625,0.498046875,0.693359375,0.498046875,0.80859375,0.724609375,0.74609375,0.7265625,0.7265625,0.751953125,0.435546875,0.755859375,0.40625,0.724609375,0.40625,"#FFF"],[0.498046875,0.18359375,0.498046875,0.251953125,0.498046875,0.29296875,0.498046875,0.29296875,0.765625,0.29296875,0.765625,0.29296875,0.765625,0.29296875,0.767578125,0.26953125,0.7734375,0.212890625,0.775390625,0.18359375,"#FFF"]];
function v(){for(var g=0;g<u.length;g++){k.beginPath();k.moveTo(600+32*u[g][0],319+32*u[g][1]);for(var d=1;d<Math.floor(u[g].length/2);d++){k.lineTo(600+32*u[g][2*d],319+32*u[g][2*d+1]);
}k.closePath();k.fillStyle=u[g][u[g].length-1];}}function w(s,j,y){var x=640/(y-1),o=Array(y);j-=s;for(var A=0;A<y;A++){o[A]={},o[A].x=A*x,o[A].y=s+j*Math.random();
}o[0].y=180;o[o.length-1].y=180;return o;}function z(x,j){var E=B,A=640/(x-1),o=Array(x),G=E.a;E.a=j;for(var y=0;y<x;y++){o[y]={},o[y].x=y*A,o[y].y=E.t(o[y].x);
}o[0].y=180;o[o.length-1].y=180;E.a=G;return o;}function C(){var g=D.w,d={width:640};d.minHeight=Math.max(40,60-g);d.maxHeight=Math.min(320,300+g);d.g=Math.min(20,3+2*Math.floor(g/4));
d.i=10;d.z=1/(80-2*Math.floor(g/5));return d;}function F(){var g=D.w,d={};d.count=1+Math.floor(g/2.5);d.U=Math.max(20,140-5*Math.floor(g/4));d.S=Math.min(620,500+5*Math.floor(g/4));
d.T=Math.max(8,10-Math.floor(g/10));d.R=Math.min(10,15-Math.floor(g/5));return d;}var D={c:function(j){if(!D.loaded){D.Z=60;D.a=0;D.P=new Date;D.w=0;D.loaded=c;
var g=C(),l=F();H.c(j);B.c(g.width,g.minHeight,g.maxHeight,g.g,g.i,g.z);I.c();J.c(l.count,l.U,H.y,l.S,H.y+H.height,l.T,l.R);K.c();}},load:function(g){D.w=g;
g=C();var d=F();B.c(g.width,g.minHeight,g.maxHeight,g.g,g.i,g.z);J.c(d.count,d.U,H.y,d.S,H.y+H.height,d.T,d.R);},loop:function(){var b=new Date;D.a=(b-D.P)/1000;
D.P=b;H.update();B.update();J.update();I.update();K.update();H.f();B.f();J.f();I.f();K.f();},D:function(){D.I||(D.H=window.setInterval(D.loop,1000/D.Z),D.I=c);
},pause:function(){D.I&&(window.clearInterval(D.H),D.I=e);},stop:function(){D.pause();D.load(0);},next:function(){D.pause();D.load(D.w+1);D.D();}},B={c:function(s,j,y,x,o,A){B.minHeight=j;
B.maxHeight=y;B.i=o;B.width=s;B.z=A;B.N=e;!B.b||!B.h?(B.a=0,B.b=w(j,y,x),B.h=w(j,y,x)):B.g!==x&&(B.b=z(x,0),B.h=z(x,1));B.g=x;},t:function(l){var j=Math.floor(l/(B.width/(B.g-1)));
if(j+1>=B.b.length||j+1>=B.h.length){return 180;}var o=B.b[j].y+(B.h[j].y-B.b[j].y)*B.a,n=B.b[j+1].y+(B.h[j+1].y-B.b[j+1].y)*B.a;return 0.5*(o+n)+Math.cos(Math.PI/B.i*((l-j*(B.width/(B.g-1)))/(B.width/(B.g-1)/B.i)))*0.5*(o-n);
},da:function(j){j=Math.floor(j/(B.width/(B.g-1)))*(B.width/(B.g-1))+j%(Math.PI/B.i);var g=j+Math.PI/B.i,l=B.t(g)-B.t(j),l=l/Math.sqrt(Math.pow(g-j,2)+Math.pow(l,2));
return Math.asin(l);},atan:function(g){if(0>=g&&640<=g){return 1;}var d=B.t(g-1);g=B.t(g+1);return d===g?1:Math.atan(2/Math.abs(d-g));},update:function(){B.a+=60*B.z*D.a;
1<=B.a&&(B.a=0,B.b=B.h,I.p?B.N?I.x===H.x+20&&(D.load(0),I.reset()):(B.N=c,B.h=w(180,180,B.g)):B.h=w(B.minHeight,B.maxHeight,B.g));},f:function(){k.save();
k.beginPath();k.moveTo(0,B.b[0].y);for(var o=0;o<B.b.length-1;o++){for(var j=B.b[o].y+(B.h[o].y-B.b[o].y)*B.a,x=B.b[o+1].y+(B.h[o+1].y-B.b[o+1].y)*B.a,s=0.5*(j+x),j=0.5*(j-x),x=Math.PI/B.i,n=0;
n<B.i;n++){k.lineTo(B.b[o].x+(B.b[o+1].x-B.b[o].x)*1/B.i*n,s+Math.cos(x*n)*j);}}k.lineTo(B.width,B.b[B.b.length-1].y);k.lineWidth=2;k.strokeStyle="white";
k.stroke();k.restore();}},I={c:function(){I.q||(I.q=c,I.x=H.x+20,I.y=0,I.s=10,I.m=100,I.color="white",I.p=e,I.a=1,I.J=0,I.r=0);},reset:function(){I.m=100;
I.p=e;I.a=1;I.J=0;},update:function(){I.y=B.t(I.x);var s=I.x,j=I.y,y=I.s,x=H.height,o=H.x,A=H.y;s-y>o+H.width||s+y<o||j-y>A+x||j+y<A?(0<I.m?I.m-=1:(I.p=c,I.J=I.x),I.color="red"):(!I.p&&100>I.m&&(I.m+=0.01),I.color="white");
I.p?I.x!==H.x+20&&(I.a=Math.max(0,I.a-B.z),I.x=I.J*I.a+(H.x+20)*(1-I.a),I.m=100*(1-I.a)):(L.O(L.X)||Touch.u&&320>Touch.d.x&&323>Touch.d.y?(I.x-=6*Math.abs(B.atan(I.x))*(60*D.a)*I.r,I.r=Math.min(1,I.r+0.1)):L.O(L.Y)||Touch.u&&320<Touch.d.x&&323>Touch.d.y?(I.x+=6*Math.abs(B.atan(I.x))*(60*D.a)*I.r,I.r=Math.min(1,I.r+0.1)):I.r=0,0>I.x-I.s?I.x=I.s:640<I.x+I.s&&(I.x=640-I.s));
},f:function(){k.save();k.beginPath();k.arc(I.x,I.y,I.s,0,2*Math.PI,e);k.lineWidth=2;k.fillStyle=I.color;k.fill();k.strokeStyle=I.color;k.stroke();k.restore();
}},H={c:function(b){H.x=30;H.y=120;H.width=580;H.height=120;H.color||(H.color=b);H.a||(H.a=0);},update:function(){H.a+=2*D.a;2<=H.a&&(H.a=0);},f:function(){k.save();
k.fillStyle=H.color;k.fillRect(0,0,640,360);for(var j=H.x,g=H.x+H.width,j=j+6*(-1+H.a),g=g-6*(-1+H.a);j<H.x+H.width;){var l=Math.min(H.x+H.width,Math.max(H.x,j));
k.beginPath();k.moveTo(l,H.y);j+=6;l=Math.min(H.x+H.width,Math.max(H.x,j));k.lineTo(l,H.y);j+=6;l=Math.min(H.x+H.width,Math.max(H.x,g));k.moveTo(l,H.y+H.height);
g-=6;l=Math.min(H.x+H.width,Math.max(H.x,g));k.lineTo(l,H.y+H.height);k.lineWidth=2;k.strokeStyle="white";k.stroke();g-=6;}j=H.y;g=H.y+H.height;j+=6*(-1+H.a);
for(g-=6*(-1+H.a);j<H.y+H.width;){l=Math.min(H.y+H.height,Math.max(H.y,j)),k.beginPath(),k.moveTo(H.x+H.width,l),j+=6,l=Math.min(H.y+H.height,Math.max(H.y,j)),k.lineTo(H.x+H.width,l),j+=6,l=Math.min(H.y+H.height,Math.max(H.y,g)),k.moveTo(H.x,l),g-=6,l=Math.min(H.y+H.height,Math.max(H.y,g)),k.lineTo(H.x,l),k.lineWidth=2,k.strokeStyle="white",k.stroke(),g-=6;
}k.restore();}};function M(j,g,l){this.x=j;this.y=g;this.size=l;this.a=0;this.F=e;this.A=0;this.color="white";this.update=function(){this.A+=0.1;this.a=this.F?this.a-1/30:this.a+1/30;
if(0.25<this.a||-0.25>this.a){this.F=!this.F;}this.color="white";var R;if(R=!I.p){var Q=R=this.size,o=this.A,V=this.x+this.size/2,S=this.y+this.size/2,P=I.x,n=I.y,U=I.s,T;
0===o?(T=P,P=n,n=V,o=S):(T=Math.cos(o)*P-Math.sin(o)*n,P=Math.cos(o)*n+Math.sin(o)*P,n=Math.cos(o)*V-Math.sin(o)*S,o=Math.cos(o)*S+Math.sin(o)*V);R=r(T,P,U,n-R/2,o+Q/2,n+R/2,o+Q/2)||r(T,P,U,n+R/2,o+Q/2,n+R/2,o-Q/2)||r(T,P,U,n+R/2,o-Q/2,n-R/2,o-Q/2)||r(T,P,U,n-R/2,o-Q/2,n-R/2,o+Q/2)?c:e;
}R&&J.remove(this);};this.f=function(){k.save();k.beginPath();k.translate(this.x+0.5*this.size,this.y+0.5*this.size);k.rotate(this.A*Math.PI/16);k.translate(-this.x-0.5*this.size,-this.y-0.5*this.size);
k.moveTo(this.x,this.y);k.quadraticCurveTo(this.x-this.size*this.a,this.y+0.5*this.size,this.x,this.y+this.size);k.quadraticCurveTo(this.x+0.5*this.size,this.y+this.size+this.size*this.a,this.x+this.size,this.y+this.size);
k.quadraticCurveTo(this.x+this.size+this.size*this.a,this.y+0.5*this.size,this.x+this.size,this.y);k.quadraticCurveTo(this.x+0.5*this.size,this.y-this.size*this.a,this.x,this.y);
k.closePath();k.lineWidth=2;k.strokeStyle=this.color;k.stroke();k.restore();};}var J={c:function(Q,P,E,A,o,j,S){var R=[];R.length=Q;for(var G=0;G<Q;G++){R[G]=new M(P+(A-P)*Math.random(),E+(o-E)*Math.random(),j+(S-j)*Math.random());
}J.j=R;},update:function(){if(!I.p){for(var b=0;b<J.j.length;b++){J.j[b].update();}}},f:function(){if(!I.p){for(var b=0;b<J.j.length;b++){J.j[b].f();}}},remove:function(g){for(var d=0;
d<J.j.length&&J.j[d]!==g;){if(d===J.j.length-1){return;}d++;}J.j.splice(d,1);0===J.j.length&&D.next();}},L={c:function(){L.q||(L.q=c,L.L=[],L.v=0,L.X=37,L.ca=38,L.Y=39,L.ba=40,L.O=function(b){return L.L[b];
},L.ea=function(){return 0<L.v;},L.$=function(b){L.L[b.keyCode]=c;L.v++;},L.aa=function(b){delete L.L[b.keyCode];L.v--;0>L.v&&(L.v=0);},window.addEventListener("keyup",function(b){L.aa(b);
},e),window.addEventListener("keydown",function(b){L.$(b);},e));}},Touch={c:function(){Touch.q||(Touch.q=c,Touch.d={},Touch.d.x=0,Touch.d.y=0,Touch.u=e,Touch.W=function(b){b||(b=event);
"ontouchstart" in window?(b.preventDefault(),Touch.d.x=b.targetTouches[0].pageX-h.offsetLeft,Touch.d.y=b.targetTouches[0].pageY-h.offsetTop):(Touch.d.x=b.clientX-h.offsetLeft,Touch.d.y=b.clientY-h.offsetTop);
Touch.u=c;},Touch.V=function(b){Touch.u=e;"ontouchstart" in window?(b.preventDefault(),Touch.d.x=b.targetTouches[0].pageX-h.offsetLeft,Touch.d.y=b.targetTouches[0].pageY-h.offsetTop):(Touch.d.x=b.clientX-h.offsetLeft,Touch.d.y=b.clientY-h.offsetTop);
D.loaded&&304<=Touch.d.x&&336>=Touch.d.x&&323<=Touch.d.y&&360>=Touch.d.y&&D.C&&(N.paused?N.play():N.pause());},h.addEventListener("touchstart",function(b){Touch.W(b);
},e),h.addEventListener("touchend",function(b){Touch.V(b);},e),h.addEventListener("mousedown",function(b){Touch.W(b);},e),h.addEventListener("mouseup",function(b){Touch.V(b);
},e));}},K={c:function(){K.q||(K.q=c,K.Q=[0,4,6,7,8,9,10,13,14,15,18,24,25,26,27,28,30,34,35,39,41,47,51,53,61,65,69,70,71,72,73,74,76,77,78,79,82,86,88,96,100,101,102,103,104,105,109,111,117,118,119,120,121,123,131,135,139,140,144,146,147,148,149,150,152,156,158,159,160,161,162,166,170,174],K.fa=[[0,1,2,3,4,7,8,11,12,15,16,17,18,19],[2,5,6,10,14,17,18,19],[0,1,2,3,7,8,9,10,11,12,16,17,18,19],[0,1,2,3,7,8,9,10,11,15,16,17,18,19],[0,3,4,7,8,9,10,11,15,19],[0,1,2,3,4,8,9,10,11,15,16,17,18,19],[9,1,2,3,4,8,9,10,11,12,15,16,17,18,19],[0,1,2,3,7,11,15,19],[0,1,2,3,4,7,8,9,10,11,12,15,16,17,18,19],[9,1,2,3,4,7,8,9,10,11,15,16,17,18,19]],K.B=[[5,6,9,10,13,14],[0,1,3,4,7,8,9,11,12,13,15,16],[4,5,6,13,14,15],[4,5,6,12,13,14],[1,2,5,6,12,13,14,16,17,18],[5,6,7,12,13,14],[5,6,7,13,14],[4,5,6,8,9,10,12,13,14,16,17,18],[5,6,13,14],[5,6,12,13,14]],K.G=[39,40,54,55,56,69,70,71,72,84,85,86,87,88,91,97,98,99,100,101,102,103,104,106,110,113,114,115,116,117,118,119,120,122,125,129,130,131,132,133,134,135,136,138,141,145,146,147,148,149,150,151,152,154,158,164,165,166,167,168,171,181,182,183,184,198,199,200,215,216]);
},update:function(){},f:function(){k.save();k.fillStyle="white";k.fillRect(0,5,6.4*I.m,16);for(var s=k.getImageData(5,7,35,5),j=0;j<K.Q.length;j++){var y=4*K.Q[j];
if(255===(s.data[y]|s.data[y+1]|s.data[y+2])||0===(s.data[y]|s.data[y+1]|s.data[y+2])){s.data[y]=255-s.data[y],s.data[y+1]=255-s.data[y+1],s.data[y+2]=255-s.data[y+2];
}else{var x;x=s.data[y];var o=s.data[y+1],A=s.data[y+2];hsv={};max=Math.max(Math.max(x,o),A);dif=max-Math.min(Math.min(x,o),A);hsv.o=0===max?0:100*dif/max;
0===hsv.o?hsv.e=0:x===max?hsv.e=60*(o-A)/dif:o===max?hsv.e=120+60*(A-x)/dif:A===max&&(hsv.e=240+60*(x-o)/dif);0>hsv.e&&(hsv.e+=360);hsv.value=Math.round(100*max/255);
hsv.e=Math.round(hsv.e);hsv.o=Math.round(hsv.o);hsv.e=(hsv.e-180)%360;x={};if(0===hsv.o){x.n=x.l=x.k=Math.round(2.55*hsv.value);}else{hsv.e/=60;hsv.o/=100;
hsv.value/=100;i=Math.floor(hsv.e);f=hsv.e-i;p=hsv.value*(1-hsv.o);q=hsv.value*(1-hsv.o*f);t=hsv.value*(1-hsv.o*(1-f));switch(i){case 0:x.n=hsv.value;x.l=t;
x.k=p;break;case 1:x.n=q;x.l=hsv.value;x.k=p;break;case 2:x.n=p;x.l=hsv.value;x.k=t;break;case 3:x.n=p;x.l=q;x.k=hsv.value;break;case 4:x.n=t;x.l=p;x.k=hsv.value;
break;default:x.n=hsv.value,x.l=p,x.k=q;}x.n=Math.round(255*x.n);x.l=Math.round(255*x.l);x.k=Math.round(255*x.k);}s.data[y]=x.n;s.data[y+1]=x.l;s.data[y+2]=x.k;
}}k.textBaseline="top";k.fillStyle="#000";k.font="12px 宋体";k.fillText("生命值",5,7);s=k.getImageData(12,324,4,5);x=k.getImageData(12,324,4,5);k.beginPath();
k.fillStyle="white";k.fillRect(8,319,54,33);o=D.w;for(j=0;j<K.B[Math.floor(o/10)].length;j++){y=4*K.B[Math.floor(o/10)][j],s.data[y+3]=0;}for(j=0;j<K.B[o%10].length;
j++){y=4*K.B[o%10][j],x.data[y+3]=0;}s=m(s,5);x=m(x,5);k.putImageData(s,12,323);k.putImageData(x,37,323);k.fillStyle="#fff";y=k.getImageData(304,323,16,16);
for(j=0;j<K.G.length;j++){N.paused&&8<K.G[j]%16||(y.data[4*K.G[j]+3]=0);}y=m(y,2);v();k.restore();}},O={c:function(){O.M=[80,60,60,60,60,80,80,80,80,80,80,80,80,80,80,80,80,80,80,60,100,80,100,60,100,100,100,60,100,100,100,60,100,60,80,80,80,80,80,80];
var b=Math.floor(5.99*Math.random());O.color="#ed5067";O.color=1===b?"#6ce3ef":2===b?"#a2b7b9":3===b?"#f3ea9b":4===b?"#de6ef2":"#000000";O.K=e;},loop:function(){O.update();
null!==O&&O.f();},update:function(){Touch.u&&O.K&&(window.clearInterval(O.H),D.c(O.color),D.D(),D.C&&N.play(),O=null);},f:function(){if(O.K){k.save();k.fillStyle=O.color;
k.fillRect(0,0,640,360);k.beginPath();k.moveTo(0,40);for(var s=115,j=0;j<O.M.length-1;j++){for(var s=s+10,y=O.M[j],x=O.M[j+1],o=0.5*(y+x),y=0.5*(y-x),x=Math.PI/10,A=0;
10>A;A++){k.lineTo(s+A,-40+o+Math.cos(x*A)*y);}}k.lineTo(640,40);k.moveTo(150,20);k.lineTo(150,60);k.moveTo(195,20);k.lineTo(195,60);k.moveTo(225,20);k.lineTo(225,60);
k.moveTo(275,20);k.lineTo(245,20);k.lineTo(245,60);k.lineTo(275,60);k.moveTo(515,20);k.lineTo(485,20);k.lineTo(485,60);k.lineTo(515,60);k.lineWidth=2;k.strokeStyle="white";
k.stroke();k.font='16px "Courier New"';k.fillStyle="#FFF";k.textAlign="center";k.fillText("触摸屏幕左右部分进行游戏",320,190);k.font='24px "Courier New"';k.fillStyle="#FFF";
k.textAlign="center";k.fillText("点击开始",320,300);k.font='10px "Courier New"';k.textAlign="left";k.fillText("COPYRIGHT \u00a9 2004 - 2013 UCWeb Inc. All Rights Reserved.",16,344);
v();k.restore();}else{k.fillStyle=O.color,k.fillRect(0,0,640,360),k.font='16px "Courier New"',k.fillStyle="#FFF",k.textAlign="center",k.fillText("Loading...",320,180);
}},D:function(){O.H=window.setInterval(O.loop,1000/60);}},N;window.onload=function(){L.c();Touch.c();O.c();O.D();D.C=e;O.K=c;N=new Audio;N.ga=e;N.autoplay=e;
N.addEventListener("canplaythrough",function(){D.C=c;N.removeEventListener("canplaythrough");},e);"boolean"===typeof N.loop?N.loop=c:N.addEventListener("ended",function(){D.C&&(N.currentTime=0,N.play());
},e);document.body.addEventListener("touchstart",function(a){a.preventDefault();},false);window.addEventListener("orientationchange",function(a){});};