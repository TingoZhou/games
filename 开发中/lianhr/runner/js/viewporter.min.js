/*
 * Viewporter v2.0
 * http://github.com/zynga/viewporter
 *
 * Copyright 2011, Zynga Inc.
 * Licensed under the MIT License.
 * https://raw.github.com/zynga/viewporter/master/MIT-LICENSE.txt
 */

var viewporter;(function(){var a;viewporter={forceDetection:false,preventPageScroll:false,ACTIVE:(function(){if((/ipad/i).test(navigator.userAgent)){return false}if((/webos/i).test(navigator.userAgent)){return true}if("ontouchstart" in window){return true}return false})(),READY:false,isLandscape:function(){return window.orientation===90||window.orientation===-90},ready:function(c){window.addEventListener("viewportready",c,false)},change:function(c){window.addEventListener("viewportchange",c,false)},refresh:function(){if(a){a.prepareVisualViewport()}}};if(!viewporter.ACTIVE){return}var b=function(){var d=this;this.IS_ANDROID=/Android/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);var c=function(){d.prepareVisualViewport();var e=window.orientation;window.addEventListener("orientationchange",function(){if(window.orientation!==e){d.prepareVisualViewport();e=window.orientation}},false);document.body.addEventListener("touchmove",function(f){if(viewporter.preventPageScroll){f.preventDefault()}},false);document.body.addEventListener("touchstart",function(){if(viewporter.preventPageScroll){d.prepareVisualViewport()}},false)};if(document.readyState==="loading"){document.addEventListener("DOMContentLoaded",function(){c()},false)}else{c()}};b.prototype={getProfile:function(){if(viewporter.forceDetection){return null}for(var c in viewporter.profiles){if(new RegExp(c).test(navigator.userAgent)){return viewporter.profiles[c]}}return null},postProcess:function(){viewporter.READY=true;this.triggerWindowEvent(!this._firstUpdateExecuted?"viewportready":"viewportchange");this._firstUpdateExecuted=true},prepareVisualViewport:function(){var h=this;if(navigator.standalone){return this.postProcess()}document.documentElement.style.minHeight="5000px";var c=window.innerHeight;var f=this.getProfile();var e=viewporter.isLandscape()?"landscape":"portrait";window.scrollTo(0,h.IS_ANDROID?1:0);var g=40;var d=window.setInterval(function(){window.scrollTo(0,h.IS_ANDROID?1:0);function j(){return f?window.innerHeight===f[e]:false}function i(){return window.innerHeight>c}g--;if((h.IS_ANDROID?j():i())||g<0){document.documentElement.style.minHeight=window.innerHeight+"px";document.getElementById("viewporter").style.position="relative";document.getElementById("viewporter").style.height=window.innerHeight+"px";clearInterval(d);h.postProcess()}},10)},triggerWindowEvent:function(c){var d=document.createEvent("Event");d.initEvent(c,false,false);window.dispatchEvent(d)}};a=new b()})();viewporter.profiles={MZ601:{portrait:696,landscape:1176},"GT-I9000|GT-I9100|Nexus S":{portrait:508,landscape:295},"GT-P1000":{portrait:657,landscape:400},"Desire_A8181|DesireHD_A9191":{portrait:533,landscape:320}};